<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>ZIM Frame - Fit Template</title>

<!-- Welcome to ZIM at https://zimjs.com - Code Creativity!              	        -->
<!-- ZIM runs on the HTML Canvas powered by JavaScript and CreateJS https://createjs.com -->
<!-- Founded by Inventor Dan Zen - http://danzen.com - Canadian New Media Award Winner 	-->
<!-- ZIM is free to use. You can donate to help improve ZIM at http://zimjs.com/donate 	-->

<script src="https://d309knd7es5f10.cloudfront.net/createjs_1.1_min.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/zim_9.2.1.js"></script>
<!-- use zimjs.com/distill for minified individual functions! -->

<script>

// SCALING OPTIONS
// scaling can have values as follows with full being the default
// "fit"	sets canvas and stage to dimensions and scales to fit inside window size
// "outside"	sets canvas and stage to dimensions and scales to fit outside window size
// "full"	sets stage to window size with no scaling
// "tagID"	add canvas to HTML tag of ID - set to dimensions if provided - no scaling

var scaling = "fit"; // this will resize to fit inside the screen dimensions
var width = 2917;
var height = 1564;
var color = light; // ZIM colors like green, blue, pink, faint, clear, etc. available globally
var outerColor = dark; // any HTML colors like "violet", "#333", etc. fine to use
var assets = ["paperball.png","glue.png","ruler.png","pencil.png","boom.png","student-01.png","student-02.png","student-03.png","student-04.png","classroom.png", "board.png"];
var path = "assets/";
var frame = new Frame(scaling, width, height, color, outerColor, assets, path, new Waiter());
frame.on("ready", function() {
    zog("ready from ZIM Frame"); // logs in console (F12 - choose console)

    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;

    // see http://zimjs.com/learn.html for video and code tutorials
    // see http://zimjs.com/docs.html for documentation
    // see http://zimjs.com/bits.html for 64 Interactive Media techniques
    
    var main = new Container(stageW, stageH);
    var detention = new Container(stageW, stageH);

    var pages = new Pages({
        holder: stage,
        pages: [
            // swipe:["right", "left", "down", "up"]
            {page: main, swipe: [null,detention,null,null]},
            {page: detention, swipe: [main,null,null,null]},
        ],
        transition: "slide",
        speed: 500
	}).addTo(stage);

    frame.asset("classroom.png").addTo(main);

    // Make labels
    var points = 3;
    var pointsLabel = new Label({
        text: "Points: " + points,
        color: white,
        size: 70,
        backgroundColor: blue,
        corner: 10,
        padding: 15
    }).pos(80, 80, true, null, main);

    var board = new Container(stageW, stageH).addTo(main);
    var items = ["paperball.png","glue.png","ruler.png","pencil.png"];
    var currentItem;
    var showItems = interval(3000, function(e){
        var item = frame.asset(items[rand(items.length-1)]).clone().sca(0.1).center(board).mov(30, -50);
        var boom;
        timeout(1500, function (e) {
            boom = frame.asset("boom.png")
                .sca(0.15)
                .rot(-90)
                .center(board)
                .mov(15,-50)
                .alp(0.7)
                .bot();
            zog(item.id);
            currentItem = item.id;
        });
        timeout(3000, function (e) {
            item.removeFrom();
            boom.removeFrom();
            currentItem = "";
            stage.update();
        });
        stage.update();
    });

    // Throw items on desk to target on the board
    // Pencil Target
    var data = [[0,0,0,0,-51.8,118.8,51.8,-118.8],[277.9,-339.3,0,0,-115.1,61.4,115.1,-61.4]];
    // Glue Target Path
    var data2 = [[0,0,0,0,45.8,105.1,-45.8,-105.1],[-305.9,-339.3,0,0,68.4,6.7,-68.4,-6.7]];
    // Ball Target Path
    var data3 = [[0,0,0,0,64.2,127.2,-64.2,-127.2],[-404.9,-509.6,0,0,105.4,7.4,-105.4,-7.4]];
    // Ruler Target Path
    var data4 = [[0,0,0,0,-90.4,127.2,90.4,-127.2],[371.2,-523.3,0,0,-53,84,53,-84]];

    // PENCIL TARGET
    // Throw pencil on desk to target on the board
    var squiggle = new Squiggle({
        color:black,
        thickness:1,
        points:data,
        showControls:false,
        interactive:false
    })
        .pos(1180,1070, null, null, main)
        .bot();
    // make pencil aka object thrown at Target
    pencil = frame.asset("pencil.png")
        .sca(0.1)
        .centerReg(main)
        .rot(180)
        .loc(squiggle.pointControls[0])
        .animate({
            props:{path:squiggle},
            time:500,
            ease:"linear",
            call:function () {
                pencil.removeFrom();
            },
            startPaused:true
        });
   // animate pencil on click
    pencil.on("mousedown", function () {
        if (pencil.id !== currentItem) {
            points--;
            if (points <= 0) {
                points = 0;
            }
            pointsLabel.text = "Points: " + points;
            stage.update;
        }
        pencil.pauseAnimate(false);
        timeout(1500, function() {
            pencil.loc(squiggle.pointControls[0]);
            stage.update();
        });
    });
    ////////////////////////////
    // GLUE TARGET
    // Throw glue on desk to target on the board
    var squiggle2 = new Squiggle({
        color:black,
        thickness:1,
        points:data2,
        showControls:false,
        interactive:false
    })
    .pos(1770,1070, null, null, main)
    .bot();
    // make glue aka object thrown at Target
    glue = frame.asset("glue.png")
        .sca(0.1)
        .centerReg(main)
        .rot(90)
        .loc(squiggle2.pointControls[0])
        .animate({
            props:{path:squiggle2},
            time:500,
            ease:"linear",
            call:function () {
                glue.removeFrom();
            },
        startPaused:true
        });
    // animate glue on click
    glue.on("mousedown", function () {
        if (pencil.id !== currentItem) {
            points--;
            if (points <= 0) {
                points = 0;
            }
            pointsLabel.text = "Points: " + points;
            stage.update;
        }
        glue.pauseAnimate(false);
        timeout(1500, function() {
            glue.loc(squiggle2.pointControls[0]);
            stage.update();
        });
    });
    ////////////////////////////
    // PAPERBALL TARGET
    // Throw paperball on desk to target on the board
    var squiggle3 = new Squiggle({
        color:black,
        thickness:1,
        points:data3,
        showControls:false,
        interactive:false
    })
        .pos(1900,1250, null, null, main)
        .bot();
    // make paperball aka object thrown at Target
    pball = frame.asset("paperball.png")
        .sca(0.07)
        .centerReg(main)
        .loc(squiggle3.pointControls[0])
        .animate({
            props:{path:squiggle3},
            time:500,
            ease:"linear",
            orient: false,
            call:function () {
                pball.removeFrom();
            },
        startPaused:true
    });
    // animate paperball on click
    pball.on("mousedown", function () {
        if (pencil.id !== currentItem) {
            points--;
            if (points <= 0) {
                points = 0;
            }
            pointsLabel.text = "Points: " + points;
            stage.update;
        }
        pball.pauseAnimate(false);
        timeout(1500, function() {
            pball.loc(squiggle3.pointControls[0]);
            stage.update();
        });
    });
    ////////////////////////////
    // RULER TARGET
    // Throw paperball on desk to target on the board
    var squiggle4 = new Squiggle({
        color:black,
        thickness:1,
        points:data4,
        showControls:false,
        interactive:false
    })
        .pos(1090,1255, null, null, main)
        .bot();
    // make ruler aka object thrown at Target
    ruler = frame.asset("ruler.png")
        .sca(0.1)
        .centerReg(main)
        .loc(squiggle4.pointControls[0])
        .animate({
            props:{path:squiggle4},
            time:500,
            ease:"linear",
            call:function () {
                ruler.removeFrom();
            },
        startPaused:true
    });
    // animate ruler on click
    ruler.on("mousedown", function () {
        if (pencil.id !== currentItem) {
            points--;
            if (points <= 0) {
                points = 0;
            }
            pointsLabel.text = "Points: " + points;
            stage.update;
        }
        ruler.pauseAnimate(false);
        timeout(1500, function() {
            ruler.loc(squiggle4.pointControls[0]);
            stage.update();
        });
    });

    var checkMiniGameBtn = new Button().pos(100, 100, true, true, main);
    checkMiniGameBtn.on("click", function() {
        pages.go(detention, "right");
        makeMiniGame();
    })

    // MINI GAME
    function makeMiniGame() {
        frame.asset("board.png").sca(2.1).center(detention);
        var miniGameResult = new Label("", 150, null, "#FFFFB6").center(detention).mov(null, -200);
        var num1 = rand(1,10);
        var num2 = rand(1,10);
        var equation = num1 + "   +   " + num2 + "   =   ";
        var index = new Label(equation + "?", 150, null, "#FFFFB6" ).center(detention);
        var ans= num1 + num2;
        // new Label(ans).pos(750,450)

        var userAns = new TextArea({
            width: 150, 
            height: 150, 
            size: 150, 
            color:"#FFFFB6"
        }).center(detention).mov(-100, 200);
        userAns.on("input", function() {
            index.text = equation + userAns.text;
            stage.update();
        });
        var button = new Button(75, 75, "GO","#FFFFB6","#DDAC40","#5C736E" )
            .sca(2)
            .center(detention)
            .mov(100, 200)

        button.on("click", function () {
            if (userAns.text == ans){
                zog("Correct! Nice job!")
                var title = "Correct! Nice job!";
                miniGameResult.text = title;
                stage.update();
            } else {
                var title = "Try Again";
                miniGameResult.text = title;
                stage.update();
            };
        })
    }
    

    // record points
    // new TransformManager(squiggle3);
    // frame.on("keydown", function (e) {
    //     zog(e.keyCode);
    //     if (e.keyCode == 82) {
    //         squiggle3.recordPoints(true);
    //     }
    // });

    stage.update(); // this is needed to show any changes

}); // end of ready

</script>

<meta name="viewport" content="width=device-width, user-scalable=no" />

</head>

<body>
<!-- canvas with id="myCanvas" is made by zim Frame -->
</body>
</html>
