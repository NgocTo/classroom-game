<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>ZIM Frame - Fit Template</title>

<!-- Welcome to ZIM at https://zimjs.com - Code Creativity!              	        -->
<!-- ZIM runs on the HTML Canvas powered by JavaScript and CreateJS https://createjs.com -->
<!-- Founded by Inventor Dan Zen - http://danzen.com - Canadian New Media Award Winner 	-->
<!-- ZIM is free to use. You can donate to help improve ZIM at http://zimjs.com/donate 	-->

<script src="https://d309knd7es5f10.cloudfront.net/createjs_1.1_min.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/zim_9.2.1.js"></script>
<!-- use zimjs.com/distill for minified individual functions! -->

<script>

// SCALING OPTIONS
// scaling can have values as follows with full being the default
// "fit"	sets canvas and stage to dimensions and scales to fit inside window size
// "outside"	sets canvas and stage to dimensions and scales to fit outside window size
// "full"	sets stage to window size with no scaling
// "tagID"	add canvas to HTML tag of ID - set to dimensions if provided - no scaling

var scaling = "fit"; // this will resize to fit inside the screen dimensions
var width = 2917;
var height = 1564;
var color = light; // ZIM colors like green, blue, pink, faint, clear, etc. available globally
var outerColor = dark; // any HTML colors like "violet", "#333", etc. fine to use
var assets = ["paperball.png","glue.png","ruler.png","pencil.png","boom.png","student-01.png","student-02.png","student-03.png","student-04.png","classroom.png"];
var path = "assets/";
var frame = new Frame(scaling, width, height, color, outerColor, assets, path, new Waiter());
frame.on("ready", function() {
    zog("ready from ZIM Frame"); // logs in console (F12 - choose console)

    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;

    // see http://zimjs.com/learn.html for video and code tutorials
    // see http://zimjs.com/docs.html for documentation
    // see http://zimjs.com/bits.html for 64 Interactive Media techniques

    // put your code here (you can delete this sample code)

    // with chaining - can also assign to a variable for later access
    frame.asset("classroom.png").addTo();

    var items = ["paperball.png","glue.png","ruler.png","pencil.png","boom.png"];
    loop(items, function(item, i) { // function version of loop
        frame.asset(item).sca(0.1).center();
    });
    interval(5000, function(e){
        var item = frame.asset(items[rand(items.length-1)]).sca(0.1).center().mov(null, -50);
        var boom;
        timeout(3000, function (e) {
            boom = frame.asset("boom.png")
                .sca(0.1)
                .center()
                .mov(null,-50)
                // .bot()
        });
        timeout(5000, function (e) {
            item.removeFrom();
            boom.removeFrom();
        });
        stage.update();
    });

    //enter Squiggle path for pencil Target
var data =
[[0,0,0,0,-30,0,30,0],[67.2,-80.4,0,0,-30,0,30,0],[138.3,-144.3,0,0,-30,0,30,0],[213.3,-236.4,0,0,-30,0,30,0],[323.4,-339.3,0,0,-30,0,30,0]];
// var pathStarts = [
//   {x:1180,y:1070}
// ];

// for (var i=0; i<data.length; i++) {
//   var d = data[i];
//   // zog(d[0][4])
// }

    // Throw items on desk to target on the board
    // loop(data, function (d) {
    var squiggle = new Squiggle({
      color:black,
      thickness:10,
      points:data
      // interactive:false;
    })
    .pos(1180,1070)
    // .bot();

    squiggle.on("mousedown", function () {
			zog("mousedown")
			pencil.pauseAnimate(false);
			timeout(450, function () {
				pencil.point.removeFrom(squiggle);
				stage.update();
			});
		});

  //make pencil aka object thrown at Target
  pencil = frame.asset("pencil.png");
  pencil.loc(squiggle.pointObjects[0])
  .sca(0.1)
  .animate({
    props:{path:squiggle},
    time:500,
    ease:"linear",
    // call:function () {
    // 	point.removeFrom();
    // }
    startPaused:true
  }); // , orient:new Point(0,0)}, 3500);

// });

    // after the Squiggle function
    new TransformManager(squiggle);
    frame.on("keydown", function (e) {
      zog(e.keyCode);
      if (e.keyCode == 82) {
          squiggle.recordPoints(true);
      }
  });
    //enter Squiggle path for pencil Target




    stage.update(); // this is needed to show any changes

}); // end of ready

</script>

<meta name="viewport" content="width=device-width, user-scalable=no" />

</head>

<body>
<!-- canvas with id="myCanvas" is made by zim Frame -->
</body>
</html>
